(function(u,f){typeof exports=="object"&&typeof module<"u"?module.exports=f():typeof define=="function"&&define.amd?define(f):(u=typeof globalThis<"u"?globalThis:u||self,u.RevealDemoPlugin=f())})(this,function(){"use strict";var K=Object.defineProperty;var Y=(u,f,m)=>f in u?K(u,f,{enumerable:!0,configurable:!0,writable:!0,value:m}):u[f]=m;var p=(u,f,m)=>Y(u,typeof f!="symbol"?f+"":f,m);var u=typeof document<"u"?document.currentScript:null;function f(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var m,C;function w(){if(C)return m;C=1;var i=function(t){return e(t)&&!r(t)};function e(n){return!!n&&typeof n=="object"}function r(n){var t=Object.prototype.toString.call(n);return t==="[object RegExp]"||t==="[object Date]"||l(n)}var a=typeof Symbol=="function"&&Symbol.for,s=a?Symbol.for("react.element"):60103;function l(n){return n.$$typeof===s}function g(n){return Array.isArray(n)?[]:{}}function b(n,t){return t.clone!==!1&&t.isMergeableObject(n)?y(g(n),n,t):n}function z(n,t,o){return n.concat(t).map(function(d){return b(d,o)})}function N(n,t){if(!t.customMerge)return y;var o=t.customMerge(n);return typeof o=="function"?o:y}function F(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(t){return Object.propertyIsEnumerable.call(n,t)}):[]}function A(n){return Object.keys(n).concat(F(n))}function j(n,t){try{return t in n}catch{return!1}}function q(n,t){return j(n,t)&&!(Object.hasOwnProperty.call(n,t)&&Object.propertyIsEnumerable.call(n,t))}function k(n,t,o){var d={};return o.isMergeableObject(n)&&A(n).forEach(function(c){d[c]=b(n[c],o)}),A(t).forEach(function(c){q(n,c)||(j(n,c)&&o.isMergeableObject(t[c])?d[c]=N(c,o)(n[c],t[c],o):d[c]=b(t[c],o))}),d}function y(n,t,o){o=o||{},o.arrayMerge=o.arrayMerge||z,o.isMergeableObject=o.isMergeableObject||i,o.cloneUnlessOtherwiseSpecified=b;var d=Array.isArray(t),c=Array.isArray(n),B=d===c;return B?d?o.arrayMerge(n,t,o):k(n,t,o):b(t,o)}y.all=function(t,o){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(d,c){return y(d,c,o)},{})};var V=y;return m=V,m}var E=w();const M=f(E);class O{constructor(e,r,a){p(this,"defaultConfig");p(this,"pluginInit");p(this,"pluginId");p(this,"mergedConfig",null);p(this,"data",{});typeof e=="string"?(this.pluginId=e,this.pluginInit=r,this.defaultConfig=a||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const r=this.defaultConfig,s=e.getConfig()[this.pluginId]||{};this.mergedConfig=M(r,s,{arrayMerge:(l,g)=>g,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:a=>this.init(a),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const _={DEV:!1},v=()=>{const e=typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:u&&u.tagName.toUpperCase()==="SCRIPT"&&u.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href}<"u"?_:void 0;return{isDevEnv:!!(e!=null&&e.DEV),isLocalFilesystem:window.location.protocol==="file:",hasNodeModules:!!document.querySelector('[src*="node_modules/"],[href*="node_modules/"]')}},I=i=>!!document.querySelector(`[data-css-id="${i}"]`),T=(i,e)=>{const r=document.createElement("style");r.setAttribute("data-css-id",i),r.textContent="/* CSS loaded via import */",document.head.appendChild(r),e&&console.log("Development CSS handled via import")},D=(i,e,r)=>new Promise((a,s)=>{const l=document.createElement("link");l.rel="stylesheet",l.href=e,l.setAttribute("data-css-id",i);const g=setTimeout(()=>{r&&console.log(`[${i}] Timeout loading CSS from: ${e}`),s(new Error(`Timeout loading CSS from: ${e}`))},5e3);l.onload=()=>{clearTimeout(g),r&&console.log(`[${i}] CSS loaded from: ${e}`),a()},l.onerror=()=>{clearTimeout(g),s(new Error(`Failed to load CSS from: ${e}`))},document.head.appendChild(l)}),S=async(i,e,r,a)=>{if(!e.length)return!1;for(const s of e)try{return await D(i,s,a),!0}catch{a&&console.log(`[${i}] Fail ${r}: ${s}`)}return!1},$=async(i,e,r)=>{if(!e)return!1;const a=Array.isArray(e)?e:[e];return S(i,a,"user",r)},U=async(i,e,r,a)=>{if(!e)return!1;let s=[];if(typeof e=="object"&&!Array.isArray(e)){if(r&&e.npm?(s=Array.isArray(e.npm)?e.npm:[e.npm],a&&console.log(`[${i}] Using npm paths`)):e.standard&&(s=Array.isArray(e.standard)?e.standard:[e.standard],a&&console.log(`[${i}] Using standard paths`)),e.fallback){const l=Array.isArray(e.fallback)?e.fallback:[e.fallback];s=[...s,...l]}}else s=Array.isArray(e)?e:[e];return S(i,s,"dev",a)},R=async i=>{const{id:e,enableLoading:r=!0,userPath:a="",developerPaths:s=[],debug:l=!1}=i;if(r===!1||a===!1)return;if(I(e)){l&&console.log(`[${e}] Already loaded`);return}const g=v();if(!await $(e,a,l)){if(g.isDevEnv){T(e,l);return}await U(e,s,g.hasNodeModules,l)||console.warn(`[${e}] CSS loading failed. Specify path via csspath.`)}},x={demoOption:"default value",cssautoload:!0,csspath:"",debug:!1};class h{constructor(e,r){p(this,"deck");p(this,"options");this.deck=e,this.options=r,this.options.debug&&console.log("Demo plugin initialized with options:",r)}initialize(){this.options.debug&&console.log("Demo plugin initialized successfully");const e=document.createElement("div");e.className="demo-plugin-indicator",e.textContent="Demo Plugin Active",document.body.appendChild(e),this.options.debug&&console.log("Indicator element added")}static create(e,r){const a=new h(e,r);return a.initialize(),a}}const L=async(i,e,r)=>{if(r.cssautoload)try{await R({id:i.pluginId,enableLoading:r.cssautoload,userPath:r.csspath,developerPaths:{npm:"node_modules/reveal.js-demo-plugin/dist/demo-plugin.css",standard:"plugin/demo-plugin/demo-plugin.css",fallback:"./css/demo-plugin.css"},debug:r.debug})}catch(a){console.warn("CSS loading failed, but plugin will continue:",a)}await h.create(e,r)};return()=>new O("demo-plugin",L,x).createInterface()});
