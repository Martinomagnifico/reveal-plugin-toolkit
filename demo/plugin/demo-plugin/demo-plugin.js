(function(d,f){typeof exports=="object"&&typeof module<"u"?module.exports=f():typeof define=="function"&&define.amd?define(f):(d=typeof globalThis<"u"?globalThis:d||self,d.RevealDemoPlugin=f())})(this,function(){"use strict";var B=Object.defineProperty;var K=(d,f,m)=>f in d?B(d,f,{enumerable:!0,configurable:!0,writable:!0,value:m}):d[f]=m;var p=(d,f,m)=>K(d,typeof f!="symbol"?f+"":f,m);var d=typeof document<"u"?document.currentScript:null;function f(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var m,C;function j(){if(C)return m;C=1;var i=function(n){return e(n)&&!r(n)};function e(t){return!!t&&typeof t=="object"}function r(t){var n=Object.prototype.toString.call(t);return n==="[object RegExp]"||n==="[object Date]"||o(t)}var a=typeof Symbol=="function"&&Symbol.for,l=a?Symbol.for("react.element"):60103;function o(t){return t.$$typeof===l}function u(t){return Array.isArray(t)?[]:{}}function h(t,n){return n.clone!==!1&&n.isMergeableObject(t)?y(u(t),t,n):t}function L(t,n,s){return t.concat(n).map(function(g){return h(g,s)})}function z(t,n){if(!n.customMerge)return y;var s=n.customMerge(t);return typeof s=="function"?s:y}function F(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(n){return Object.propertyIsEnumerable.call(t,n)}):[]}function A(t){return Object.keys(t).concat(F(t))}function v(t,n){try{return n in t}catch{return!1}}function N(t,n){return v(t,n)&&!(Object.hasOwnProperty.call(t,n)&&Object.propertyIsEnumerable.call(t,n))}function q(t,n,s){var g={};return s.isMergeableObject(t)&&A(t).forEach(function(c){g[c]=h(t[c],s)}),A(n).forEach(function(c){N(t,c)||(v(t,c)&&s.isMergeableObject(n[c])?g[c]=z(c,s)(t[c],n[c],s):g[c]=h(n[c],s))}),g}function y(t,n,s){s=s||{},s.arrayMerge=s.arrayMerge||L,s.isMergeableObject=s.isMergeableObject||i,s.cloneUnlessOtherwiseSpecified=h;var g=Array.isArray(n),c=Array.isArray(t),V=g===c;return V?g?s.arrayMerge(t,n,s):q(t,n,s):h(n,s)}y.all=function(n,s){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(g,c){return y(g,c,s)},{})};var k=y;return m=k,m}var w=j();const E=f(w);class M{constructor(e,r,a){p(this,"defaultConfig");p(this,"pluginInit");p(this,"pluginId");p(this,"mergedConfig",null);p(this,"data",{});typeof e=="string"?(this.pluginId=e,this.pluginInit=r,this.defaultConfig=a||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const r=this.defaultConfig,l=e.getConfig()[this.pluginId]||{};this.mergedConfig=E(r,l,{arrayMerge:(o,u)=>u,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:a=>this.init(a),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const O={DEV:!1},_=()=>{const e=typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href}<"u"?O:void 0;return{isDevEnv:!!(e!=null&&e.DEV),isLocalFilesystem:window.location.protocol==="file:",hasNodeModules:!!document.querySelector('[src*="node_modules/"],[href*="node_modules/"]')}},T=i=>!!document.querySelector(`[data-css-id="${i}"]`),$=(i,e)=>{const r=document.createElement("style");r.setAttribute("data-css-id",i),r.textContent="/* CSS loaded via import */",document.head.appendChild(r),e&&console.log("Development CSS handled via import")},D=(i,e,r)=>new Promise((a,l)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=e,o.setAttribute("data-css-id",i);const u=setTimeout(()=>{r&&console.log(`[${i}] Timeout loading CSS from: ${e}`),l(new Error(`Timeout loading CSS from: ${e}`))},5e3);o.onload=()=>{clearTimeout(u),r&&console.log(`[${i}] CSS loaded from: ${e}`),a()},o.onerror=()=>{clearTimeout(u),l(new Error(`Failed to load CSS from: ${e}`))},document.head.appendChild(o)}),S=async(i,e,r,a)=>{if(!e.length)return!1;for(const l of e)try{return await D(i,l,a),!0}catch{a&&console.log(`[${i}] Fail ${r}: ${l}`)}return!1},I=async(i,e,r)=>{if(!e)return!1;const a=Array.isArray(e)?e:[e];return S(i,a,"user",r)},P=async(i,e,r,a)=>{if(!e)return!1;let l=[];if(typeof e=="object"&&!Array.isArray(e)){const o=e;if(r&&o.npm){const u=Array.isArray(o.npm)?o.npm:[o.npm];l=[...l,...u],a&&console.log(`[${i}] Using npm paths first`)}if(o.standard){const u=Array.isArray(o.standard)?o.standard:[o.standard];l=[...l,...u],!r||!o.npm?a&&console.log(`[${i}] Using standard paths`):a&&console.log(`[${i}] Adding standard paths as fallback`)}if(o.fallback){const u=Array.isArray(o.fallback)?o.fallback:[o.fallback];l=[...l,...u]}}else l=Array.isArray(e)?e:[e];return S(i,l,"dev",a)},U=async i=>{const{id:e,enableLoading:r=!0,userPath:a="",developerPaths:l=[],debug:o=!1}=i;if(r===!1||a===!1)return;if(T(e)){o&&console.log(`[${e}] Already loaded`);return}const u=_();if(!await I(e,a,o)){if(u.isDevEnv){$(e,o);return}await P(e,l,u.hasNodeModules,o)||console.warn(`[${e}] CSS loading failed. Specify path via csspath.`)}},R={demoOption:"default value",cssautoload:!0,csspath:"",debug:!1};class b{constructor(e,r){p(this,"deck");p(this,"options");this.deck=e,this.options=r,this.options.debug&&console.log("Demo plugin initialized with options:",r)}initialize(){this.options.debug&&console.log("Demo plugin initialized successfully");const e=document.createElement("div");e.className="demo-plugin-indicator",e.textContent="Demo Plugin Active",document.body.appendChild(e),this.options.debug&&console.log("Indicator element added")}static create(e,r){const a=new b(e,r);return a.initialize(),a}}const x=async(i,e,r)=>{if(r.cssautoload)try{await U({id:i.pluginId,enableLoading:r.cssautoload,userPath:r.csspath,developerPaths:{npm:"node_modules/reveal.js-demo-plugin/dist/demo-plugin.css",standard:"plugin/demo-plugin/demo-plugin.css",fallback:"./css/demo-plugin.css"},debug:r.debug})}catch(a){console.warn("CSS loading failed, but plugin will continue:",a)}await b.create(e,r)};return()=>new M("demo-plugin",x,R).createInterface()});
