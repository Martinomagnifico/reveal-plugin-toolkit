(function(a,d){typeof exports=="object"&&typeof module<"u"?module.exports=d():typeof define=="function"&&define.amd?define(d):(a=typeof globalThis<"u"?globalThis:a||self,a.RevealDemoPlugin=d())})(this,function(){"use strict";var F=Object.defineProperty;var z=(a,d,m)=>d in a?F(a,d,{enumerable:!0,configurable:!0,writable:!0,value:m}):a[d]=m;var y=(a,d,m)=>z(a,typeof d!="symbol"?d+"":d,m);var a=typeof document<"u"?document.currentScript:null;function d(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var m,j;function A(){if(j)return m;j=1;var s=function(n){return e(n)&&!i(n)};function e(t){return!!t&&typeof t=="object"}function i(t){var n=Object.prototype.toString.call(t);return n==="[object RegExp]"||n==="[object Date]"||c(t)}var o=typeof Symbol=="function"&&Symbol.for,l=o?Symbol.for("react.element"):60103;function c(t){return t.$$typeof===l}function f(t){return Array.isArray(t)?[]:{}}function h(t,n){return n.clone!==!1&&n.isMergeableObject(t)?C(f(t),t,n):t}function S(t,n,r){return t.concat(n).map(function(p){return h(p,r)})}function g(t,n){if(!n.customMerge)return C;var r=n.customMerge(t);return typeof r=="function"?r:C}function b(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(n){return Object.propertyIsEnumerable.call(t,n)}):[]}function I(t){return Object.keys(t).concat(b(t))}function T(t,n){try{return n in t}catch{return!1}}function N(t,n){return T(t,n)&&!(Object.hasOwnProperty.call(t,n)&&Object.propertyIsEnumerable.call(t,n))}function x(t,n,r){var p={};return r.isMergeableObject(t)&&I(t).forEach(function(u){p[u]=h(t[u],r)}),I(n).forEach(function(u){N(t,u)||(T(t,u)&&r.isMergeableObject(n[u])?p[u]=g(u,r)(t[u],n[u],r):p[u]=h(n[u],r))}),p}function C(t,n,r){r=r||{},r.arrayMerge=r.arrayMerge||S,r.isMergeableObject=r.isMergeableObject||s,r.cloneUnlessOtherwiseSpecified=h;var p=Array.isArray(n),u=Array.isArray(t),q=p===u;return q?p?r.arrayMerge(t,n,r):x(t,n,r):h(n,r)}C.all=function(n,r){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(p,u){return C(p,u,r)},{})};var D=C;return m=D,m}var O=A();const R=d(O);class P{constructor(e,i,o){y(this,"defaultConfig");y(this,"pluginInit");y(this,"pluginId");y(this,"mergedConfig",null);y(this,"data",{});typeof e=="string"?(this.pluginId=e,this.pluginInit=i,this.defaultConfig=o||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const i=this.defaultConfig,l=e.getConfig()[this.pluginId]||{};this.mergedConfig=R(i,l,{arrayMerge:(c,f)=>f,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:o=>this.init(o),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const U=s=>{const e=document.querySelector(`script[src$="${s}.js"], script[src$="${s}.min.js"], script[src$="${s}.mjs"]`);if(e!=null&&e.src){const i=e.getAttribute("src")||"",o=i.lastIndexOf("/");if(o!==-1)return i.substring(0,o+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${s}/`},w="data-css-id",E=(s,e,i)=>new Promise((o,l)=>{const c=document.createElement("link");c.rel="stylesheet",c.href=e,c.setAttribute(w,s);const f=setTimeout(()=>{c.parentNode&&c.parentNode.removeChild(c),i&&console.log(`[${s}] Timeout loading CSS from: ${e}`),l(new Error(`Timeout loading CSS from: ${e}`))},5e3);c.onload=()=>{clearTimeout(f),o()},c.onerror=()=>{clearTimeout(f),c.parentNode&&c.parentNode.removeChild(c),l(new Error(`Failed to load CSS from: ${e}`))},document.head.appendChild(c)}),M=s=>document.querySelectorAll(`[${w}="${s}"]`).length>0,v=async s=>{const{id:e,cssautoload:i=!0,csspath:o="",debug:l=!1}=s;if(i===!1||o===!1)return;if(M(e)){l&&console.log(`[${e}] CSS already loaded, skipping`);return}const c=[];typeof o=="string"&&o.trim()!==""&&(c.push(o),l&&console.log(`[${e}] Added user-specified path: ${o}`));const f=U(e);if(f){const g=`${f}${e}.css`;c.push(g),l&&console.log(`[${e}] Added auto-detected path from script location: ${g}`)}const h=`plugin/${e}/${e}.css`;c.push(h),l&&console.log(`[${e}] Added standard fallback path: ${h}`);const S=`plugins/${e}/${e}.css`;c.push(S),l&&console.log(`[${e}] Added standard fallback path: ${S}`);for(const g of c)try{l&&console.log(`[${e}] Trying CSS path: ${g}`),await E(e,g,l);let b="CSS";o&&g===o?b="user-specified CSS":f&&g===`${f}${e}.css`?b="auto-detected script location CSS":b="standard fallback CSS",l&&console.log(`[${e}] ${b} loaded successfully from: ${g}`);return}catch{l&&console.log(`[${e}] Failed to load CSS from: ${g}`)}console.warn(`[${e}] Could not load CSS from any location`)},_={demoOption:"default value",cssautoload:!0,csspath:"",debug:!1};class ${constructor(e,i){y(this,"deck");y(this,"options");this.deck=e,this.options=i,this.options.debug&&console.log("Demo plugin initialized with options:",i)}initialize(){this.options.debug&&console.log("Demo plugin initialized successfully");const e=document.createElement("div");e.className="demo-plugin-indicator",e.textContent="Demo Plugin Active",document.body.appendChild(e),this.options.debug&&console.log("Indicator element added")}static create(e,i){const o=new $(e,i);return o.initialize(),o}}const L=async(s,e,i)=>{if(i.cssautoload)try{await v({id:s.pluginId,cssautoload:i.cssautoload,csspath:i.csspath,debug:i.debug})}catch(o){console.warn("CSS loading failed, but plugin will continue:",o)}await $.create(e,i)};return()=>new P("demo-plugin",L,_).createInterface()});
